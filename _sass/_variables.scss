/**************/
/* VARIABLES  */
/**************/

@function color_lumanance($color) {
  // Adapted from: https://gist.github.com/voxpelli/6304812, which was adapted from:
  // https://github.com/LeaVerou/contrast-ratio/blob/gh-pages/color.js
  // Formula: http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef
  $rgba: red($color), green($color), blue($color);
  $rgba2: ();

  @for $i from 1 through 3 {
    $rgb: nth($rgba, $i);
    $rgb: $rgb / 255;

    $rgb: if($rgb < .03928, $rgb / 12.92, pow(($rgb + .055) / 1.055, 2.4));

    $rgba2: append($rgba2, $rgb);
  }

  @return (.2126 * nth($rgba2, 1) + .7152 * nth($rgba2, 2) + 0.0722 * nth($rgba2, 3)) * 100;
}

@function contrast_ratio($color1, $color2) {
  // Adapted from: https://github.com/LeaVerou/contrast-ratio/blob/gh-pages/color.js
  // Formula: http://www.w3.org/TR/2008/REC-WCAG20-20081211/#contrast-ratiodef
  $luma1: color_lumanance($color1) + 5;
  $luma2: color_lumanance($color2) + 5;
  $ratio: $luma1 / $luma2;

  @if $luma1 < $luma2 {
    $ratio: 1 / $ratio;
  }

  @return $ratio;
}

@function text-contrast($color, $bgcolor: $color) {
  $threshold: 7.0; // 4.5 = WCAG AA,7= WCAG AAA
  $list: 20 30 40 50 60 70 80 90 100;
  @each $percent in $list {
    $lighter: lighten($bgcolor, $percent);
    $darker: darken($bgcolor, $percent);
    $darker-ratio: contrast_ratio($color, $darker);
    $lighter-ratio: contrast_ratio($color, $lighter);

    @if($lighter-ratio > $darker-ratio) {
      @if ($lighter-ratio > $threshold) {
        @return $lighter;
      }
    }

    @if($darker-ratio > $lighter-ratio) {
      @if ($darker-ratio > $threshold) {
        @return $darker;
      }
    }
  }

  @return if(lightness($color) < 51, #FFF, #000)
}


// Colors from http://clrs.cc/. These are easier on the eyes than the default HTML/CSS
// colors of the same name.
$Navy: #001f3f;
$Blue: #0074d9;
$Aqua: #7fdbff;
$Teal: #39cccc;
$OysterBay: #ccf1f1;
$Olive: #3d9970;
$Green: #2ecc40;
$Lime: #01ff70;
$Yellow: #ffdc00;
$Orange: #ff851b;
$Red: #ff4136;
$Maroon: #85144b;
$Fuschsia: #f012be;
$Purple: #b10dc9;
$Black: #111111;
$Gray: #aaaaaa;
$Silver: #dddddd;
$White: #ffffff;

// Additional color definitions
$NearlyBlack: #222222;
$DarkGray: #888888;
$PaleGray: #EBEBEB;
$LightGray: #bfbfcc;
$MediumGray: #bbbbbb;
$PaleCornflowerBlue: #abcdef;
$DarkReef: #CEF0AD;
$Cosmic: #794d60;
$DarkCosmic: #784859;
$Dingley: #597848;
$Millbrook: #59584e;
$Merlin: #49483f;
$Cornflower: #8CCAF0; // lighter than cornflowerblue
$Chambray: #475877;
$BlackPearl: #1E272C;
$Ghost: #C0BFC7;
$Whisper: #e9e9e9;

$BackgroundGray: $Merlin;

// SASS style sheet */
// Palette color codes */
// Palette URL: http://paletton.com/#uid=13q0u0kllllaFw0g0qFqFg0w0aF
// A monochromatic color palette, also known as the Pastel preset with a base color of #27586B
//$PrimaryMiddleBlue: #27586B;    // base
$PrimaryMiddleBlue: #30515d;
$PrimaryLightestBlue: #6D92A0;
$PrimaryLightBlue: #457485;
$PrimaryDarkBlue: #205E70;      // was #103E50
$PrimaryDarkestBlue: #002533;   // was #022735

$color-primary-0: $PrimaryMiddleBlue;
$color-primary-1: $PrimaryLightestBlue;
$color-primary-2: $PrimaryLightBlue;
$color-primary-3: $PrimaryDarkBlue;
$color-primary-4: $PrimaryDarkestBlue;

// Sidebar
//$sidebar_background_color: $color-primary-1;
//$sidebar_background_color: $color-primary-2;
$sidebar_background_color: $color-primary-0;

// Navigation
$navbar_background_light: $color-primary-0;
$navbar_border_color: $navbar_background_light;
$navbar_background_dark: $color-primary-4;

// Footer
$footer_border_color: $navbar_background_light;
$selection_background: $color-primary-2;

//$main_background_color: $DarkGray;
$main_background_color: $BackgroundGray;

//$main_color: was rgba(255, 255, 255, 0.8);
$main_color: text-contrast($main_background_color);
$text_color: $main_color;

// Links
//$link_color: $Teal;
$link_color: $OysterBay;
$hover_color: text-contrast($main_background_color);
$visited_color: text-contrast($main_background_color);
$visited_hover_color: $Whisper;
$link_active_color: $Green;

// H2 headings
$heading_h2_color: $main-color;
$time_color: rgba(255, 255, 255, 0.5);

$cssMiddot: "\00b7";
$fixed-width: 960px;
$left_logo_and_menu: 15px;

// Font stacks
// Relative URLs are allowed in the 'url()' function and are relative to the URL of the stylesheet (not the
// URL of the web page).
// @font-face {
//     font-family: 'nexa_rust_extrasfree';
//     src: url('/fonts/NexaRustFree/NexaRustExtras-Free-webfont.eot');
//     src: url('/fonts/NexaRustFree/NexaRustExtras-Free-webfont.eot?#iefix') format('embedded-opentype'),
//          url('/fonts/NexaRustFree/NexaRustExtras-Free-webfont.woff2') format('woff2'),
//          url('/fonts/NexaRustFree/NexaRustExtras-Free-webfont.woff') format('woff'),
//          url('/fonts/NexaRustFree/NexaRustExtras-Free-webfont.ttf') format('truetype'),
//          url('/fonts/NexaRustFree/NexaRustExtras-Free-webfont.svg#nexa_rust_extrasfree') format('svg');
//     font-weight: normal;
//     font-style: normal;
// }
//
// @font-face {
//     font-family: 'nexa_rust_handmadeextended';
//     src: url('/fonts/NexaRustFree/NexaRustHandmade-Extended-Free-webfont.eot');
//     src: url('/fonts/NexaRustFree/NexaRustHandmade-Extended-Free-webfont.eot?#iefix') format('embedded-opentype'),
//          url('/fonts/NexaRustFree/NexaRustHandmade-Extended-Free-webfont.woff2') format('woff2'),
//          url('/fonts/NexaRustFree/NexaRustHandmade-Extended-Free-webfont.woff') format('woff'),
//          url('/fonts/NexaRustFree/NexaRustHandmade-Extended-Free-webfont.ttf') format('truetype'),
//          url('/fonts/NexaRustFree/NexaRustHandmade-Extended-Free-webfont.svg#nexa_rust_handmadeextended') format('svg');
//     font-weight: normal;
//     font-style: normal;
// }

// @font-face {
//     font-family: 'nexa_rust_sansblack';
//     src: url('/fonts/NexaRustFree/NexaRustSans-Black-Free-webfont.eot');
//     src: url('/fonts/NexaRustFree/NexaRustSans-Black-Free-webfont.eot?#iefix') format('embedded-opentype'),
//          url('/fonts/NexaRustFree/NexaRustSans-Black-Free-webfont.woff2') format('woff2'),
//          url('/fonts/NexaRustFree/NexaRustSans-Black-Free-webfont.woff') format('woff'),
//          url('/fonts/NexaRustFree/NexaRustSans-Black-Free-webfont.ttf') format('truetype'),
//          url('/fonts/NexaRustFree/NexaRustSans-Black-Free-webfont.svg#nexa_rust_sansblack') format('svg');
//     font-weight: normal;
//     font-style: normal;
// }

// @font-face {
//     font-family: 'nexa_rust_script_l0regular';
//     src: url('/fonts/NexaRustFree/NexaRustScriptL-0-Free-webfont.eot');
//     src: url('/fonts/NexaRustFree/NexaRustScriptL-0-Free-webfont.eot?#iefix') format('embedded-opentype'),
//          url('/fonts/NexaRustFree/NexaRustScriptL-0-Free-webfont.woff2') format('woff2'),
//          url('/fonts/NexaRustFree/NexaRustScriptL-0-Free-webfont.woff') format('woff'),
//          url('/fonts/NexaRustFree/NexaRustScriptL-0-Free-webfont.ttf') format('truetype'),
//          url('/fonts/NexaRustFree/NexaRustScriptL-0-Free-webfont.svg#nexa_rust_script_l0regular') format('svg');
//     font-weight: normal;
//     font-style: normal;
// }

@font-face {
    font-family: 'Nexa Rust Slab';
    src: url('/fonts/NexaRustFree/NexaRustSlab-BlackShadow01-Free-webfont.eot');
    src: url('/fonts/NexaRustFree/NexaRustSlab-BlackShadow01-Free-webfont.eot?#iefix') format('embedded-opentype'),
         url('/fonts/NexaRustFree/NexaRustSlab-BlackShadow01-Free-webfont.woff2') format('woff2'),
         url('/fonts/NexaRustFree/NexaRustSlab-BlackShadow01-Free-webfont.woff') format('woff'),
         url('/fonts/NexaRustFree/NexaRustSlab-BlackShadow01-Free-webfont.ttf') format('truetype'),
         url('/fonts/NexaRustFree/NexaRustSlab-BlackShadow01-Free-webfont.svg#nexa_rust_slabblack_shadow_01') format('svg');
    font-weight: normal;
    font-style: normal;
}

@font-face {
    font-family: 'Noto Sans';
    src: url('/fonts/Noto/NotoSans-Regular.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
}

$helvetica: Helvetica, Arial, sans-serif;
$helveticaNeue: "Helvetica Neue", Helvetica, Arial, sans-serif;
$Georgia: Georgia, serif;
$NexaRustSlab: 'Nexa Rust Slab';
//$body-font-family: "Helvetica Neue", Helvetica, Roboto, Arial, sans-serif;
$body-font-family: "Helvetica Neue", Helvetica, 'Noto Sans', Arial, sans-serif;
$heading-font-family: $Georgia;
$alternative-heading-font-family: $Georgia;

// Mobile breakpoints
@mixin mobile {
  @media screen and (max-width: 640px) {
    @content;
  }
}
